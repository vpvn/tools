ding2tei-haskell
================

A program to convert the Ding [0] dictionary into the TEI [1] format, to be
used within the FreeDict project [2].

IMPORTANT: This program is written as part of a Bachelor's thesis.  Please
refrain from giving me any advice on the programming part.  In particular,
please do not publish any modifications of my code.  This will no longer be
of concern once the bachelor's thesis is submitted (september or october 2020).

This program is still under development and not yet able to perform its task.


Dependencies
------------

* Haskell
  * base
  * containers (Data.Map, Data.Set)
  * transformers (Control.Monad.Trans.State)
  * pretty (Text.PrettyPrint)
  * haskell-xml (Text.XML.Light)
* Happy
* Alex


Locale
------

Use a UTF-8 locale, or else some things might produce unexpected results or
even fail.  In particular, do not use the C locale.


Obtain the data
---------------

The Ding source can be obtained here:

 https://ftp.tu-chemnitz.de/pub/Local/urz/ding/de-en/

Currently this program targets version 1.8.1.  Expect things to fail with other
versions.

Store the uncompressed file at:

 dingsrc/de-en.txt


How to build
------------

$ cd src

$ alex Language/Ding/AlexScanner.x
$ happy Language/Ding/HappyParser.y

$ ghc -Wall -O2 Main -o ../ding2tei


How to run
----------

Note: The program currently allocates a lot of memory, around 3.5 GiB, when
      applied to the full Ding source.

$ src/preprocess/all.sh < dingsrc/de-en.txt > dingsrc/de-en.txt.preprocessed
$ ding2tei dingsrc/de-en.txt.preprocessed deu-eng.tei


How to test (manually)
----------------------

$ ghci src/Test.hs
>> parseLine $ scan "some dictionary :: line\n"
>> parse $ scan $ header ++ example1
>> tailParse "filename" nInitialLinesDropped


Licensing
---------

ding2tei-haskell is distributed under the GNU Affero General Public License
(AGPL), version 3 or later.

See the license headers in the source files and the license itself for details
(should be supplied with this program under the name COPYING).

The Ding source is licensed under the GNU General Public License (GPL), version
2 or later.  In the context of this program, version 3 of the license should be
considered, since it allows combining with the AGPLv3.  (Likely, later versions
will also allow combining.)

The combination of the Ding dictionary and this program form a combined work,
the resulting TEI dictionary is an "object form" of this combined work, in
terms of both the GPL and AGPL.


Author
------

ding2tei-haskell is written by Einhard Leichtfu√ü.
Feel free to contact me by e-mail to <alguien@respiranto.de>.


References
----------

[0] https://www-user.tu-chemnitz.de/~fri/ding/
[1] https://tei-c.org/
[2] https://freedict.org/
